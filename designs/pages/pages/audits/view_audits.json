[
    {
        "id": "sd_9PTNXsPJNJlzNGtS",
        "type": "tab",
        "createdDate": "2025-09-09T16:06:17.522Z",
        "label": "view_audits",
        "disabled": false,
        "info": "",
        "functionSeq": 0,
        "generateNext": true,
        "serviceName": "view_auditsComponent"
    },
    {
        "id": "sd_dhAEgvJh8pT3qcRI",
        "type": "OnInit",
        "z": "sd_9PTNXsPJNJlzNGtS",
        "viewType": "common",
        "nodeType": "start",
        "name": "",
        "inputVariables": [],
        "localVariables": [],
        "outputVariables": [],
        "pageVariables": [],
        "functionName": "sd_dhAEgvJh8pT3qcRI",
        "category": "Lifecycle Events",
        "x": 125,
        "y": 60,
        "wires": [
            [
                "sd_NYTz8KmB6gopr9PS"
            ]
        ],
        "__n_excludedFromValidation__": {},
        "generateNext": true,
        "serviceName": "view_auditsComponent"
    },
    {
        "id": "sd_ptBpr4zohQSa9UI1",
        "type": "ViewPicker",
        "z": "sd_9PTNXsPJNJlzNGtS",
        "viewType": "common",
        "nodeType": "flow",
        "name": "",
        "outputs": 1,
        "childViewVariables": [
            {
                "key": {
                    "type": "literal",
                    "value": "MatSort"
                },
                "defaultValue": "",
                "isViewChildren": false
            },
            {
                "key": {
                    "type": "literal",
                    "value": "MatPaginator"
                },
                "defaultValue": "",
                "isViewChildren": false
            }
        ],
        "functionName": "sd_ptBpr4zohQSa9UI1",
        "category": "Function",
        "x": 814.0000095367432,
        "y": 171.81250190734863,
        "wires": [
            [
                "sd_DU2wUoAqr4kmX84L"
            ]
        ],
        "__n_excludedFromValidation__": {},
        "generateNext": false,
        "serviceName": "view_auditsComponent",
        "generated": true
    },
    {
        "id": "sd_DU2wUoAqr4kmX84L",
        "type": "Script",
        "z": "sd_9PTNXsPJNJlzNGtS",
        "viewType": "common",
        "nodeType": "flow",
        "name": "",
        "script": "this.page.tableData.sort = this.MatSort;\nthis.page.tableData.paginator = this.MatPaginator;\n\n\npage.operations = [\n   {value: 'READ_BOOK', viewValue: 'BOOK READ'},\n   {value: 'CREATE_BOOK', viewValue: 'BOOK CREATE'},\n   {value: 'UPDATE_BOOK', viewValue: 'BOOK UPDATE'},\n   {value: 'DELETE_BOOK', viewValue: 'BOOK DELETE'},\n   {value: 'GENERATE_PDF', viewValue: 'PDF GENERATE'},\n   {value: 'LOGIN', viewValue: 'USER LOGIN'},\n   {value: 'LOGOUT', viewValue: 'USER LOGOUT'},\n ];\n\n\nconsole.log('page startDate', page.startDate)\nconsole.log('page endDate', page.endDate)\n\n",
        "functionName": "sd_DU2wUoAqr4kmX84L",
        "category": "Function",
        "x": 921.0000114440918,
        "y": 172.81250190734863,
        "wires": [
            []
        ],
        "__n_excludedFromValidation__": {},
        "generateNext": false,
        "serviceName": "view_auditsComponent",
        "generated": true
    },
    {
        "id": "sd_NYTz8KmB6gopr9PS",
        "type": "HttpRequest",
        "z": "sd_9PTNXsPJNJlzNGtS",
        "viewType": "client-pages",
        "nodeType": "flow",
        "name": "",
        "method": "get",
        "methodMapping": "",
        "methodMappingObj": {},
        "urlMapping": "\"http://localhost:8081/api/audits\"",
        "urlMappingObj": {
            "mapVarType": "str",
            "mapVarValue": "http://localhost:8081/api/audits"
        },
        "ret": "json",
        "retMapping": "",
        "retMappingObj": {},
        "observe": "",
        "observeMapping": "",
        "observeMappingObj": {},
        "reportProgress": false,
        "withCreds": false,
        "reqBody": "",
        "reqBodyObj": {
            "mapVarType": "this.page",
            "mapVarValue": ""
        },
        "resultMapping": "bh.local.response",
        "resultMappingObj": {
            "mapVarType": "bh.local",
            "mapVarValue": "response"
        },
        "headers": {},
        "headersObj": [],
        "headerMapping": "",
        "headerMappingObj": {},
        "params": {},
        "paramsObj": [],
        "paramMapping": "",
        "paramMappingObj": {},
        "functionName": "sd_NYTz8KmB6gopr9PS",
        "category": "HTTP",
        "x": 286,
        "y": 58.8125,
        "wires": [
            [
                "sd_8cAnef9EeqQ1ek0l"
            ]
        ],
        "__n_excludedFromValidation__": {},
        "generateNext": false,
        "serviceName": "view_auditsComponent",
        "generated": true
    },
    {
        "id": "sd_nyFHutfFPAHydtUy",
        "type": "PageStart",
        "z": "sd_9PTNXsPJNJlzNGtS",
        "viewType": "pages",
        "nodeType": "start",
        "name": "pagination",
        "outputs": 1,
        "inputVariables": [],
        "localVariables": [],
        "flow_type": "sync",
        "functionName": "pagination",
        "category": "General",
        "x": 125,
        "y": 200,
        "wires": [
            [
                "sd_mALOTDlr5ZG7STc5"
            ]
        ],
        "__n_excludedFromValidation__": {},
        "generateNext": true,
        "serviceName": "view_auditsComponent"
    },
    {
        "id": "sd_mALOTDlr5ZG7STc5",
        "type": "Script",
        "z": "sd_9PTNXsPJNJlzNGtS",
        "viewType": "common",
        "nodeType": "flow",
        "name": "pagination_logic",
        "script": "const pageIndex = page.tableData.paginator.pageIndex;\nconst pageSize = page.tableData.paginator.pageSize;\n\nbh.local.currentPage = pageIndex + 1;\nbh.local.limit = pageSize;\n\n",
        "functionName": "paginationLogic",
        "category": "Function",
        "x": 227.72726440429688,
        "y": 200.00001525878906,
        "wires": [
            [
                "sd_hZYSmCtT4jBWQR9A"
            ]
        ],
        "__n_excludedFromValidation__": {},
        "generateNext": false,
        "serviceName": "view_auditsComponent",
        "generated": true
    },
    {
        "id": "sd_8cAnef9EeqQ1ek0l",
        "type": "Script",
        "z": "sd_9PTNXsPJNJlzNGtS",
        "viewType": "common",
        "nodeType": "flow",
        "name": "",
        "script": "\nbh.local.dataSource=new MatTableDataSource(bh.local.response.auditLogsData)\n\n\n page.selected=[];\n page.startDate=null;\n page.endDate=new Date();",
        "functionName": "sd_8cAnef9EeqQ1ek0l",
        "category": "Function",
        "x": 452,
        "y": 57.8125,
        "wires": [
            [
                "sd_OSrPXNNXyK9n2sOF"
            ]
        ],
        "__n_excludedFromValidation__": {},
        "generateNext": false,
        "serviceName": "view_auditsComponent",
        "generated": true
    },
    {
        "id": "sd_OSrPXNNXyK9n2sOF",
        "type": "PageVariables",
        "z": "sd_9PTNXsPJNJlzNGtS",
        "viewType": "pages",
        "nodeType": "flow",
        "name": "",
        "inputs": 1,
        "outputs": 1,
        "operation": "set",
        "globalVariables": [
            {
                "textIp": "tableData",
                "typedIpValue": {
                    "type": "bh.local",
                    "value": "dataSource"
                }
            },
            {
                "textIp": "totalDocuments",
                "typedIpValue": {
                    "type": "bh.local",
                    "value": "response.totalDocuments"
                }
            },
            {
                "textIp": "limit",
                "typedIpValue": {
                    "type": "bh.local",
                    "value": "response.limit"
                }
            }
        ],
        "functionName": "sd_OSrPXNNXyK9n2sOF",
        "category": "Function",
        "x": 714.0000095367432,
        "y": 171.81250190734863,
        "wires": [
            [
                "sd_ptBpr4zohQSa9UI1"
            ]
        ],
        "__n_excludedFromValidation__": {},
        "generateNext": false,
        "serviceName": "view_auditsComponent",
        "generated": true
    },
    {
        "id": "sd_Hu1LH4yLTDQZbp76",
        "type": "HttpRequest",
        "z": "sd_9PTNXsPJNJlzNGtS",
        "viewType": "client-pages",
        "nodeType": "flow",
        "name": "",
        "method": "get",
        "methodMapping": "",
        "methodMappingObj": {},
        "urlMapping": "\"http://localhost:8081/api/audits\"",
        "urlMappingObj": {
            "mapVarType": "str",
            "mapVarValue": "http://localhost:8081/api/audits"
        },
        "ret": "json",
        "retMapping": "",
        "retMappingObj": {},
        "observe": "",
        "observeMapping": "",
        "observeMappingObj": {},
        "reportProgress": false,
        "withCreds": false,
        "reqBody": "",
        "reqBodyObj": {
            "mapVarType": "bh.local",
            "mapVarValue": ""
        },
        "resultMapping": "bh.local.response",
        "resultMappingObj": {
            "mapVarType": "bh.local",
            "mapVarValue": "response"
        },
        "headers": {},
        "headersObj": [],
        "headerMapping": "",
        "headerMappingObj": {},
        "params": [],
        "paramsObj": {},
        "paramMapping": "bh.local.query",
        "paramMappingObj": {
            "mapVarType": "bh.local",
            "mapVarValue": "query"
        },
        "functionName": "sd_Hu1LH4yLTDQZbp76",
        "category": "HTTP",
        "x": 454.00000190734863,
        "y": 200,
        "wires": [
            [
                "sd_031pqSMYINsGeSoM"
            ]
        ],
        "__n_excludedFromValidation__": {},
        "generateNext": false,
        "serviceName": "view_auditsComponent",
        "generated": true
    },
    {
        "id": "sd_031pqSMYINsGeSoM",
        "type": "Script",
        "z": "sd_9PTNXsPJNJlzNGtS",
        "viewType": "common",
        "nodeType": "flow",
        "name": "",
        "script": "bh.local.dataSource=bh.local.response.auditLogsData",
        "functionName": "sd_031pqSMYINsGeSoM",
        "category": "Function",
        "x": 541.0000038146973,
        "y": 198,
        "wires": [
            [
                "sd_OSrPXNNXyK9n2sOF"
            ]
        ],
        "__n_excludedFromValidation__": {},
        "generateNext": false,
        "serviceName": "view_auditsComponent",
        "generated": true
    },
    {
        "id": "sd_5ZQrftzxC92QQuiG",
        "type": "PageStart",
        "z": "sd_9PTNXsPJNJlzNGtS",
        "viewType": "pages",
        "nodeType": "start",
        "name": "filtered",
        "outputs": 1,
        "inputVariables": [],
        "localVariables": [],
        "flow_type": "sync",
        "functionName": "filtered",
        "category": "General",
        "x": 125,
        "y": 340,
        "wires": [
            [
                "sd_3jexMU6Dmg1f4Nq9"
            ]
        ],
        "__n_excludedFromValidation__": {},
        "generateNext": true,
        "serviceName": "view_auditsComponent"
    },
    {
        "id": "sd_3jexMU6Dmg1f4Nq9",
        "type": "Script",
        "z": "sd_9PTNXsPJNJlzNGtS",
        "viewType": "common",
        "nodeType": "flow",
        "name": "filter_pagination",
        "script": "const pageSize = page.tableData.paginator.pageSize;\n\nbh.local.currentPage = 1;\nbh.local.limit = pageSize;\n\n\npage.filter={\n    operations:page.selected,\n    startDate:page.startDate,\n    endDate:page.endDate\n}",
        "functionName": "filterPagination",
        "category": "Function",
        "x": 225,
        "y": 340,
        "wires": [
            [
                "sd_hZYSmCtT4jBWQR9A"
            ]
        ],
        "__n_excludedFromValidation__": {},
        "generateNext": false,
        "serviceName": "view_auditsComponent",
        "generated": true
    },
    {
        "id": "sd_hZYSmCtT4jBWQR9A",
        "type": "Script",
        "z": "sd_9PTNXsPJNJlzNGtS",
        "viewType": "common",
        "nodeType": "flow",
        "name": "create query params",
        "script": "console.log('bh.local.currentPage ==',bh.local.currentPage)\nconsole.log('bh.local.limit ==',bh.local.limit)\n\nbh.local.query={\n    ...page.filter,\n    page:bh.local.currentPage,\n    limit:bh.local.limit\n}\n\n\nconsole.log('pagination query === ',bh.local.query)",
        "functionName": "createQueryParams",
        "category": "Function",
        "x": 345.02502632141113,
        "y": 201.0124740600586,
        "wires": [
            [
                "sd_Hu1LH4yLTDQZbp76"
            ]
        ],
        "__n_excludedFromValidation__": {},
        "generateNext": false,
        "serviceName": "view_auditsComponent",
        "generated": true
    },
    {
        "id": "sd_nK23oTd7xIVKW5qN",
        "type": "PageStart",
        "z": "sd_9PTNXsPJNJlzNGtS",
        "viewType": "pages",
        "nodeType": "start",
        "name": "clear filter",
        "outputs": 1,
        "inputVariables": [],
        "localVariables": [],
        "flow_type": "sync",
        "functionName": "clearFilter",
        "category": "General",
        "x": 205,
        "y": 440,
        "wires": [
            [
                "sd_3no30brsAE7lDQeR"
            ]
        ],
        "__n_excludedFromValidation__": {},
        "generateNext": true,
        "serviceName": "view_auditsComponent"
    },
    {
        "id": "sd_3no30brsAE7lDQeR",
        "type": "Script",
        "z": "sd_9PTNXsPJNJlzNGtS",
        "viewType": "common",
        "nodeType": "flow",
        "name": "clear filter logic",
        "script": "const pageIndex = page.tableData.paginator.pageIndex;\nconst pageSize = page.tableData.paginator.pageSize;\n\nbh.local.currentPage = 1;\nbh.local.limit = pageSize;\n\npage.filter = {}\npage.selected = [];\npage.startDate = null;\npage.endDate = new Date();",
        "functionName": "clearFilterLogic",
        "category": "Function",
        "x": 305,
        "y": 440,
        "wires": [
            [
                "sd_hZYSmCtT4jBWQR9A"
            ]
        ],
        "__n_excludedFromValidation__": {},
        "generateNext": false,
        "serviceName": "view_auditsComponent",
        "generated": true
    },
    {
        "id": "sd_IKPpmZDdhEeIE2WP",
        "type": "PageStart",
        "z": "sd_9PTNXsPJNJlzNGtS",
        "viewType": "pages",
        "nodeType": "start",
        "name": "pdf_generate",
        "outputs": 1,
        "inputVariables": [],
        "localVariables": [],
        "flow_type": "sync",
        "functionName": "pdfGenerate",
        "category": "General",
        "x": 125,
        "y": 560,
        "wires": [
            [
                "sd_8Hd79VZ4YrbXYAez"
            ]
        ],
        "__n_excludedFromValidation__": {},
        "generateNext": true,
        "serviceName": "view_auditsComponent"
    },
    {
        "id": "sd_8Hd79VZ4YrbXYAez",
        "type": "Script",
        "z": "sd_9PTNXsPJNJlzNGtS",
        "viewType": "common",
        "nodeType": "flow",
        "name": "",
        "script": "\nbh.local.pdfGenerateURL='http://localhost:8081/api/audits/report/pdf'\n\nbh.local.query={\n    operations:page.selected,\n    startDate:page.startDate,\n    endDate:page.endDate\n}\n\nconsole.log('query params ---',bh.local.query)",
        "functionName": "sd_8Hd79VZ4YrbXYAez",
        "category": "Function",
        "x": 264.9999885559082,
        "y": 560.0156803131104,
        "wires": [
            [
                "sd_2zJoV5mBZEVDTqtK"
            ]
        ],
        "__n_excludedFromValidation__": {},
        "generateNext": false,
        "serviceName": "view_auditsComponent",
        "generated": true
    },
    {
        "id": "sd_2zJoV5mBZEVDTqtK",
        "type": "HttpRequest",
        "z": "sd_9PTNXsPJNJlzNGtS",
        "viewType": "client-pages",
        "nodeType": "flow",
        "name": "",
        "method": "get",
        "methodMappingObj": {},
        "urlMapping": "bh.local.pdfGenerateURL",
        "urlMappingObj": {
            "mapVarType": "bh.local",
            "mapVarValue": "pdfGenerateURL"
        },
        "ret": "blob",
        "retMappingObj": {},
        "observe": "",
        "observeMappingObj": {},
        "reportProgress": false,
        "withCreds": false,
        "reqBodyObj": {
            "mapVarType": "bh",
            "mapVarValue": ""
        },
        "resultMapping": "bh.local.blob",
        "resultMappingObj": {
            "mapVarType": "bh.local",
            "mapVarValue": "blob"
        },
        "headers": {
            "Accept": "application/pdf"
        },
        "headersObj": [
            {
                "key": "Accept",
                "defaultValue": "application/pdf"
            }
        ],
        "headerMappingObj": {},
        "paramMapping": "bh.local.query",
        "paramMappingObj": {
            "mapVarType": "bh.local",
            "mapVarValue": "query"
        },
        "functionName": "sd_2zJoV5mBZEVDTqtK",
        "category": "HTTP",
        "x": 417.4687194824219,
        "y": 561.3437271118164,
        "wires": [
            [
                "sd_rZq58zaQesGyeqdF"
            ]
        ],
        "__n_excludedFromValidation__": {},
        "generateNext": false,
        "serviceName": "view_auditsComponent",
        "generated": true
    },
    {
        "id": "sd_rZq58zaQesGyeqdF",
        "type": "Script",
        "z": "sd_9PTNXsPJNJlzNGtS",
        "viewType": "common",
        "nodeType": "flow",
        "name": "",
        "script": "console.log('res from pdf generate === ', bh.local.blob)\n\nlet blob = bh.local.blob\nconst url = window.URL.createObjectURL(blob);\nconst a = document.createElement('a');\na.href = url;\na.download = 'audit-report.pdf';\na.click();\n\nwindow.URL.revokeObjectURL(url);\n",
        "functionName": "sd_rZq58zaQesGyeqdF",
        "category": "Function",
        "x": 545,
        "y": 560,
        "wires": [
            []
        ],
        "__n_excludedFromValidation__": {},
        "generateNext": false,
        "serviceName": "view_auditsComponent",
        "generated": true
    }
]
